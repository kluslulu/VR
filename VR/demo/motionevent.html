<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<div id="dmEvent"></div>
</body>
<script>
	// 事件监听
	if ((window.DeviceMotionEvent) {
		window.addEventListener('devicemotion', DeviceMotionHandler, false);
	} else {
		document.getElementById("dmEvent").innerHTML = "Not supported on your device."
	}
	// 捕捉重力加速度
	var acceleration = eventData.accelerationIncludingGravity;
	// 摇一摇demo
	var SHAKE_THRESHOLD = 800;
	var last_update = 0;
	var x,y,z,last_x,last_y,last_z;
	function deviceMotionHandler (eventData) {
		var acceleration = eventData.accelerationIncludingGravity;
		vvar curTime = new Data().getTime();
		if((curTime - last_update)> 300) {
			var diffTime = curTime - last_update;
			last_update = curTime;
			x = acceleration.x;
			y = acceleration.y;
			z = acceleration.z;
			var speed = Math.abs(x + y + z - last_x - last_y - last_z)/diffTime*10000;
			if( speed > SHAKE_THRESHOLD){
				alert("shaked!");
			}
			last_x = x;
			last_y = y;
			last_z = z;
		}
	}
</script>
</html>